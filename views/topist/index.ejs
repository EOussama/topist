<% include ../partials/header.ejs %>

<section class="section topist-list">
    <div class="container">
        <article class="message is-info">
            <div class="message-header">
                <p>TOP <%= data.entries.length %> <%= data.topic %></p>
                <nav class="level is-mobile">
                    <div class="level-left">
                        <a class="level-item" aria-label="reply">
                            <span class="icon is-medium">
                                <i class="fas fa-arrow-alt-circle-up" aria-hidden="true"></i>
                            </span>
                            <span><%= data.upvotes %></span>
                        </a>
                        <a class="level-item" aria-label="retweet">
                            <span class="icon is-medium">
                                <i class="fas fa-arrow-alt-circle-down" aria-hidden="true"></i>
                            </span>
                            <span><%= data.downvotes %></span>
                        </a>
                        <span class="level-item" aria-label="like">
                            <span class="icon is-medium">
                                <i class="fas fa-eye" aria-hidden="true"></i>
                            </span>
                            <span><%= data.views %></span>
                        </span>
                    </div>
                </nav>
            </div>
            <div class="message-body">
                <%= data.description %>
                <hr>
                <small>
                    Originally posted by <a><strong><%= data.user %></strong></a> on <i><%= data.date.toLocaleDateString() %></i>.
                </small>
            </div>
        </article>

        <hr>

        <% data.entries.sort((a, b) => b.position - a.position).forEach(entry => { %>
            <div class="card">
                <div class="card-image">
                    <figure class="image is-4by3">
                        <img src="<%= entry.picture %>" alt="<%= entry.title %> image">
                    </figure>
                </div>
                <div class="card-content">
                    <div class="media">
                        <div class="media-left">
                            <div class="topbox-pos pos-<%= entry.position %>">
                                <span class="value"><%= entry.position %></span>
                            </div>
                        </div>
                        <div class="media-content">
                            <p class="title is-4"><%= entry.title %></p>
                            <p class="subtitle is-6"><%= entry.subtitle %></p>
                        </div>
                    </div>
                    <div class="content">
                        <p><%= entry.description %></p>
                    </div>
                </div>
            </div>
        <hr>
        <% }); %>
    </div>
</section>

<% include ../partials/footer.ejs %>